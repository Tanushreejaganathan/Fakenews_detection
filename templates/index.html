{% extends "base.html" %}
{% block title %}Fake News Detector{% endblock %}
{% block content %}
  <h1>ðŸ§  Fake News Detector</h1>
  <p class="subtitle">Type or speak text to analyze news authenticity (AI-powered).</p>

  <form action="/explain" method="POST">
    <label for="news_text">Enter or Speak News Article:</label>
    <textarea id="news_text" name="news_text" rows="10" maxlength="5000" required placeholder="Paste or type a news snippet here..."></textarea>
    <p class="note">Minimum 20 characters required. Max 5000 characters.</p>

    <button type="button" onclick="startDictation()">ðŸŽ¤ Speak</button>
    <button type="submit">Analyze</button>
  </form>

  <script>
    function startDictation() {
      if (window.hasOwnProperty('webkitSpeechRecognition')) {
        const recognition = new webkitSpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";
        recognition.start();

        recognition.onresult = function(e) {
          document.getElementById('news_text').value = e.results[0][0].transcript;
          recognition.stop();
        };

        recognition.onerror = function(e) {
          recognition.stop();
          alert("Speech recognition error: " + e.error);
        };
      } else {
        alert("Speech recognition not supported. Try Chrome.");
      }
    }
  </script>
{% endblock %}